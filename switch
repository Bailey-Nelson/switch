#!/usr/bin/env bash

FILE=~/.bnswitch
[ ! -f "$FILE" ] && touch ~/.bnswitch
source $FILE

if [ -z $1 ]; then
  echo -e "ERROR: missing repo-name"
  echo -e "  usage: switch [repo-name]"
  echo -e "  example:\n    $ switch pipeline"
  return 1
fi

if [ -z "$org_name" ]; then
  echo -n 'github org: '
  read org_name
  echo "org_name=$org_name" >> $FILE
fi

BASE_PATH="dev/github.com/$org_name"
BASE_URL="git@github.com:$org_name"
DIR=~/$BASE_PATH/$1

if [ -d $DIR ]; then
  cd ~/$BASE_PATH/$1
else
  git clone $BASE_URL/$1.git ~/$BASE_PATH/$1 && \
    cd ~/$BASE_PATH/$1
fi

